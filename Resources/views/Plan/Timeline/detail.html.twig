{#
This file is part of the CampaignChain package.

(c) CampaignChain Inc. <info@campaignchain.com>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.
#}

{% extends 'CampaignChainCoreBundle:Base:base.html.twig' %}

{% block javascripts %}
    {{ parent() }}

    {% javascripts '@dhtmlxgantt_js' combine=true %}
    <!-- @dhtmlxgantt_js --><script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {% javascripts '@dhtmlxgantt_tooltip_js' combine=true %}
    <!-- @dhtmlxgantt_tooltip_js --><script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}

    {% stylesheets '@dhtmlxgantt_css' combine=true %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
    {% endstylesheets %}
{% endblock %}

{% block bodytabs %}
    {{ knp_menu_render('CampaignChainCampaignScheduledCampaignBundle:Builder:detailsTab', { 'style': 'tabs' }) }}
{% endblock %}

{% block body %}
    {% set gantt_toolbar_status = 'inline' %}
    <script type="text/javascript">
        var campaign_start_date = moment('{{ scale_start_date }}', moment.ISO_8601);
        var campaign_end_date = moment('{{ scale_end_date }}', moment.ISO_8601);
    </script>

    {% javascripts '@campaignchain_dhtmlxgantt_pre_init_absolute_dates_js' combine=true %}
    <!-- pre init --><script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    {% include 'CampaignChainCampaignScheduledCampaignBundle:Plan/Timeline:toolbar.html.twig' %}

    <div id="gantt_here" style='width:100%; height:600px;'></div>

    <script type="text/javascript">
        var tasks = {{ gantt_tasks|raw }}
                gantt.init(
                    "gantt_here"
                );
    </script>

    {% javascripts '@campaignchain_dhtmlxgantt_post_init_absolute_dates_js' combine=true %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script type="text/javascript">
        gantt.parse (tasks);
    </script>

    {% include 'CampaignChainCoreBundle:Base:modal_remote.html.twig' %}
{% endblock %}